#!/bin/bash

i=1
while true
do
    if [ $i -gt 30 ]; then
        exit 1
    fi
    echo "trying count ... => $i"
    res="`curl --silent localhost:8081/hubot/ping||echo ""`"
    echo "curl result => '$res'"
    if [ "$res" = "PONG" ]; then
        exit 0
    fi
    echo "waiting 2 seconds ..."
    sleep 2
    i=`expr $i + 1`
done
